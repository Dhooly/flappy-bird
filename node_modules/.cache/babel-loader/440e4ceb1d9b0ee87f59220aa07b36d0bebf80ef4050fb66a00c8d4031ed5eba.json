{"ast":null,"code":"import _slicedToArray from\"/home/daniel/javascript/React-projects/flappy-bird/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useState,useEffect}from'react';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GRAVITY=0.5;var onStartup=function onStartup(){// Check for local storage\nif(localStorage.getItem('fb-best')!==null){return+JSON.parse(localStorage.getItem('fb-best'));}return 0;};function App(){// state\nvar intervalId=useRef(null);var canvasRef=useRef(null);var _useState=useState(300),_useState2=_slicedToArray(_useState,2),position=_useState2[0],setPosition=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),score=_useState4[0],setScore=_useState4[1];var _useState5=useState(onStartup()),_useState6=_slicedToArray(_useState5,2),best=_useState6[0],setBest=_useState6[1];var _useState7=useState(GRAVITY),_useState8=_slicedToArray(_useState7,2),deltaY=_useState8[0],setDeltaY=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),baseX=_useState10[0],setBaseX=_useState10[1];var _useState11=useState(500),_useState12=_slicedToArray(_useState11,2),pipe1X=_useState12[0],setPipe1X=_useState12[1];var _useState13=useState(500),_useState14=_slicedToArray(_useState13,2),pipe2X=_useState14[0],setPipe2X=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),randHeight1=_useState16[0],setRandHeight1=_useState16[1];var _useState17=useState(150),_useState18=_slicedToArray(_useState17,2),randHeight2=_useState18[0],setRandHeight2=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),startGame=_useState20[0],setStartGame=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),gameOver=_useState22[0],setGameOver=_useState22[1];useEffect(function(){// Default canvas startup\nif(canvasRef.current){var ctx=canvasRef.current.getContext('2d');if(ctx){var bgImage=document.getElementById('bg');var base=document.getElementById('base');var message=document.getElementById('msg');// const birdImage = document.getElementById('bird-mf') as HTMLCanvasElement\nctx===null||ctx===void 0?void 0:ctx.clearRect(0,0,window.innerWidth,window.innerHeight);// draw background\nctx===null||ctx===void 0?void 0:ctx.drawImage(bgImage,0,-50,bgImage.width*10,bgImage.height*1.5);// draw bases and connect them\nctx===null||ctx===void 0?void 0:ctx.drawImage(base,baseX,550);ctx===null||ctx===void 0?void 0:ctx.drawImage(base,baseX+336,550);// Draw tap message\nctx===null||ctx===void 0?void 0:ctx.save();ctx===null||ctx===void 0?void 0:ctx.scale(1.25,1.25);ctx===null||ctx===void 0?void 0:ctx.drawImage(message,100,100);ctx===null||ctx===void 0?void 0:ctx.restore();}}},[]);useEffect(function(){// Start counter once user starts or resets game\nif(startGame){intervalId.current=setInterval(function(){return runGame();},16);}return function(){if(intervalId.current){clearInterval(intervalId.current);}};},[startGame,position,deltaY]);// Main animation loop\nvar runGame=function runGame(){if(position<=525&&!gameOver){if(canvasRef.current){var ctx=canvasRef.current.getContext('2d');if(ctx){// Grab images\nvar bgImage=document.getElementById('bg');var base=document.getElementById('base');var pipe=document.getElementById('pipe');var birdImage;ctx===null||ctx===void 0?void 0:ctx.clearRect(0,0,window.innerWidth,window.innerHeight);ctx===null||ctx===void 0?void 0:ctx.drawImage(bgImage,0,-50,bgImage.width*10,bgImage.height*1.5);// Render different bird image based on its deltaY\nif(deltaY>7){birdImage=document.getElementById('bird-df');}else if(deltaY<7&&deltaY>0){birdImage=document.getElementById('bird-mf');}else{birdImage=document.getElementById('bird-uf');}// Rotate bird based on its deltaY\nctx===null||ctx===void 0?void 0:ctx.save();ctx===null||ctx===void 0?void 0:ctx.translate(180+35*(14/9)/2,position+35/2);ctx===null||ctx===void 0?void 0:ctx.rotate(deltaY/-15);ctx===null||ctx===void 0?void 0:ctx.drawImage(birdImage,-(35*(14/9))/2,-35/2,35*(14/9),35);ctx===null||ctx===void 0?void 0:ctx.restore();// Render pipe as long as its on the screen\nif(pipe1X>-100){ctx===null||ctx===void 0?void 0:ctx.save();ctx===null||ctx===void 0?void 0:ctx.scale(1.5,1.5);ctx===null||ctx===void 0?void 0:ctx.translate(pipe1X+pipe.width/2,pipe.height/2);ctx===null||ctx===void 0?void 0:ctx.rotate(Math.PI);ctx===null||ctx===void 0?void 0:ctx.drawImage(pipe,-pipe.width/2,-pipe.height/2+125+randHeight1);ctx===null||ctx===void 0?void 0:ctx.restore();ctx===null||ctx===void 0?void 0:ctx.save();ctx===null||ctx===void 0?void 0:ctx.scale(1.5,1.5);ctx===null||ctx===void 0?void 0:ctx.drawImage(pipe,pipe1X,300-randHeight1);ctx===null||ctx===void 0?void 0:ctx.restore();}// Render pipe as long as its on the screen and 1st pipe is halfway down screen\nif((pipe1X<350||pipe2X<300)&&pipe2X>-100){ctx===null||ctx===void 0?void 0:ctx.save();ctx===null||ctx===void 0?void 0:ctx.scale(1.5,1.5);ctx===null||ctx===void 0?void 0:ctx.translate(pipe2X+pipe.width/2,pipe.height/2);ctx===null||ctx===void 0?void 0:ctx.rotate(Math.PI);ctx===null||ctx===void 0?void 0:ctx.drawImage(pipe,-pipe.width/2,-pipe.height/2+125+randHeight2);ctx===null||ctx===void 0?void 0:ctx.restore();ctx===null||ctx===void 0?void 0:ctx.save();ctx===null||ctx===void 0?void 0:ctx.scale(1.5,1.5);ctx===null||ctx===void 0?void 0:ctx.drawImage(pipe,pipe2X,300-randHeight2);ctx===null||ctx===void 0?void 0:ctx.restore();}// Ground loop\nif(baseX<=-192){setBaseX(0);}ctx===null||ctx===void 0?void 0:ctx.drawImage(base,baseX,550);ctx===null||ctx===void 0?void 0:ctx.drawImage(base,baseX+336,550);}}// Gravity for bird\nsetPosition(function(prevPos){return prevPos-deltaY;});// Set a terminal velocity\nif(deltaY>-15){setDeltaY(function(prevDelX){return prevDelX-GRAVITY/0.666;});}// Set base speed\nsetBaseX(function(prevBaseX){return prevBaseX-GRAVITY*8;});if(pipe1X>-100){setPipe1X(function(prevPipeX){return prevPipeX-GRAVITY*5.3333;});}else{setPipe1X(333);setRandHeight1(Math.floor(Math.random()*150));}// Once the first pipe is past the middle, start moving the 2nd pipe\nif(pipe1X<285||pipe2X<300){if(pipe2X>-100){setPipe2X(function(prevPipeX){return prevPipeX-GRAVITY*5.33333;});}else{setPipe2X(333);setRandHeight2(Math.floor(Math.random()*150));}}// Increment score once bird passes through pipe\nif(Math.round(pipe1X)===129||Math.round(pipe1X)===130||Math.round(pipe2X)===129||Math.round(pipe2X)===130){if(score!==null){setScore(score+1);}}// Game over if birds x and y position cross pipe\nif(Math.round(pipe1X)<156&&Math.round(pipe1X)>71){if(position>415-randHeight1*1.5){handleGameOver();}if(position<295-randHeight1*1.5){handleGameOver();}}// Game over if birds x and y position cross pipe\nif(Math.round(pipe2X)<156&&Math.round(pipe2X)>71){if(position>415-randHeight2*1.5){handleGameOver();}if(position<295-randHeight2*1.5){handleGameOver();}}}else{// Clear interval if game over\nif(intervalId.current){clearInterval(intervalId.current);}handleGameOver();}};var jump=function jump(){// Set a cap to the height a user can jump\nif(position>-100){// Set deltaY to positive number to make velocity positive\nsetDeltaY(GRAVITY*20);// Add deltaY to the position\nsetPosition(function(prevPos){return prevPos+deltaY;});}};var handleEvent=function handleEvent(){// Start the game on click if first run\nif(!startGame&&!gameOver){setStartGame(true);setScore(0);}jump();};var handleGameOver=function handleGameOver(){// Set new best\nif(score>best){setBest(score);localStorage.setItem('fb-best',JSON.stringify(score));}setStartGame(false);setGameOver(true);setPipe1X(500);setPipe2X(500);};var handleReset=function handleReset(){setStartGame(true);setGameOver(false);setScore(0);setPosition(300);};return/*#__PURE__*/_jsxs(\"div\",{onKeyDown:handleEvent,onClick:handleEvent,className:\"game-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:require('./images/background-day.png'),id:\"bg\",width:\"50\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"img\",{src:require('./images/base.png'),id:\"base\",width:\"50\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"img\",{src:require('./images/message.png'),id:\"msg\",width:\"50\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"img\",{src:require('./images/pipe-green.png'),id:\"pipe\",width:\"50\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"img\",{src:require('./images/yellowbird-upflap.png'),id:\"bird-uf\",width:\"50\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"img\",{src:require('./images/yellowbird-midflap.png'),id:\"bird-mf\",width:\"50\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"img\",{src:require('./images/yellowbird-downflap.png'),id:\"bird-df\",width:\"50\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,width:480,height:640}),startGame&&/*#__PURE__*/_jsx(\"div\",{className:\"score\",children:score}),gameOver&&/*#__PURE__*/_jsxs(\"div\",{className:\"end-game-popup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"game-over-scores\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"SCORE:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:score}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"BEST:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:best})]}),/*#__PURE__*/_jsx(\"button\",{className:\"restart\",onClick:handleReset,children:\"RESTART\"})]})]});}export default App;","map":{"version":3,"names":["useRef","useState","useEffect","GRAVITY","onStartup","localStorage","getItem","JSON","parse","App","intervalId","canvasRef","position","setPosition","score","setScore","best","setBest","deltaY","setDeltaY","baseX","setBaseX","pipe1X","setPipe1X","pipe2X","setPipe2X","randHeight1","setRandHeight1","randHeight2","setRandHeight2","startGame","setStartGame","gameOver","setGameOver","current","ctx","getContext","bgImage","document","getElementById","base","message","clearRect","window","innerWidth","innerHeight","drawImage","width","height","save","scale","restore","setInterval","runGame","clearInterval","pipe","birdImage","translate","rotate","Math","PI","prevPos","prevDelX","prevBaseX","prevPipeX","floor","random","round","handleGameOver","jump","handleEvent","setItem","stringify","handleReset","require","display"],"sources":["/home/daniel/javascript/React-projects/flappy-bird/src/App.tsx"],"sourcesContent":["import { useRef, useState, useEffect } from 'react'\nimport './App.css'\n\nconst GRAVITY = 0.5\n\nconst onStartup = () => {\n  // Check for local storage\n  if (localStorage.getItem('fb-best') !== null) {\n    return +JSON.parse(localStorage.getItem('fb-best')!)\n  }\n\n  return 0\n}\n\nfunction App() {\n  // state\n  const intervalId = useRef<NodeJS.Timer | null>(null)\n  const canvasRef = useRef<HTMLCanvasElement | null>(null)\n  const [position, setPosition] = useState(300)\n  const [score, setScore] = useState<number>(0)\n  const [best, setBest] = useState<number>(onStartup())\n  const [deltaY, setDeltaY] = useState(GRAVITY)\n  const [baseX, setBaseX] = useState(0)\n  const [pipe1X, setPipe1X] = useState(500)\n  const [pipe2X, setPipe2X] = useState(500)\n  const [randHeight1, setRandHeight1] = useState(0)\n  const [randHeight2, setRandHeight2] = useState(150)\n  const [startGame, setStartGame] = useState(false)\n  const [gameOver, setGameOver] = useState(false)\n  \n\n  useEffect(() => {\n      // Default canvas startup\n      if (canvasRef.current) {\n        const ctx = canvasRef.current.getContext('2d')\n\n        if (ctx) {\n          const bgImage = document.getElementById('bg') as HTMLCanvasElement\n          const base = document.getElementById('base') as HTMLCanvasElement\n          const message = document.getElementById('msg') as HTMLCanvasElement\n          // const birdImage = document.getElementById('bird-mf') as HTMLCanvasElement\n          ctx?.clearRect(0, 0, window.innerWidth, window.innerHeight)\n          // draw background\n          ctx?.drawImage(bgImage, 0, -50, bgImage.width * 10, bgImage.height * 1.5)\n          // draw bases and connect them\n          ctx?.drawImage(base, baseX, 550)\n          ctx?.drawImage(base, baseX + 336, 550)\n          // Draw tap message\n          ctx?.save()\n          ctx?.scale(1.25, 1.25)\n          ctx?.drawImage(message, 100, 100)\n          ctx?.restore()\n        }\n      }\n  }, [])\n\n\n  useEffect(() => {\n    // Start counter once user starts or resets game\n    if (startGame) {\n      intervalId.current = setInterval(() => runGame(), 16)\n    }\n\n    return () => {\n      if (intervalId.current) {\n        clearInterval(intervalId.current)\n      }\n    }\n  }, [startGame, position, deltaY])\n\n  // Main animation loop\n  const runGame = () => {\n    if (position <= 525 && !gameOver) {\n      if (canvasRef.current) {\n        const ctx = canvasRef.current.getContext('2d')\n\n        if (ctx) {\n          // Grab images\n          const bgImage = document.getElementById('bg') as HTMLCanvasElement\n          const base = document.getElementById('base') as HTMLCanvasElement\n          const pipe = document.getElementById('pipe') as HTMLCanvasElement\n          let birdImage\n          ctx?.clearRect(0, 0, window.innerWidth, window.innerHeight)\n          ctx?.drawImage(bgImage, 0, -50, bgImage.width * 10, bgImage.height * 1.5)\n\n          // Render different bird image based on its deltaY\n          if (deltaY > 7) {\n            birdImage = document.getElementById('bird-df') as HTMLCanvasElement\n          } else if (deltaY < 7 && deltaY > 0) {\n            birdImage = document.getElementById('bird-mf') as HTMLCanvasElement\n          } else {\n            birdImage = document.getElementById('bird-uf') as HTMLCanvasElement\n          }\n          // Rotate bird based on its deltaY\n          ctx?.save()\n          ctx?.translate(180 + (35 * (14 / 9)) / 2, position + 35 / 2)\n          ctx?.rotate(deltaY / -15)\n          ctx?.drawImage(birdImage, -(35 * (14 / 9)) / 2, -35 / 2, 35 * (14 / 9), 35)\n          ctx?.restore()\n\n          \n          // Render pipe as long as its on the screen\n          if (pipe1X > -100) {\n            ctx?.save()\n            ctx?.scale(1.5, 1.5)\n            ctx?.translate(pipe1X + pipe.width / 2, pipe.height / 2)\n            ctx?.rotate(Math.PI)\n            ctx?.drawImage(pipe, -pipe.width / 2, -pipe.height / 2 + 125 + randHeight1)\n            ctx?.restore()\n\n            ctx?.save()\n            ctx?.scale(1.5, 1.5)\n            ctx?.drawImage(pipe, pipe1X, 300 - randHeight1)\n            ctx?.restore()\n          }\n\n          // Render pipe as long as its on the screen and 1st pipe is halfway down screen\n          if ((pipe1X < 350 || pipe2X < 300) && pipe2X > -100) {\n            ctx?.save()\n            ctx?.scale(1.5, 1.5)\n            ctx?.translate(pipe2X + pipe.width / 2, pipe.height / 2)\n            ctx?.rotate(Math.PI)\n            ctx?.drawImage(pipe, -pipe.width / 2, -pipe.height / 2 + 125 + randHeight2)\n            ctx?.restore()\n\n            ctx?.save()\n            ctx?.scale(1.5, 1.5)\n            ctx?.drawImage(pipe, pipe2X, 300 - randHeight2)\n            ctx?.restore()\n          }\n\n          // Ground loop\n          if (baseX <= -192) {\n            setBaseX(0)\n          }\n          ctx?.drawImage(base, baseX, 550)\n          ctx?.drawImage(base, baseX + 336, 550)\n        }\n      }\n\n      // Gravity for bird\n      setPosition((prevPos) => prevPos - deltaY)\n      // Set a terminal velocity\n      if (deltaY > -15) {\n        setDeltaY((prevDelX) => prevDelX - GRAVITY / 0.666)\n      }\n      // Set base speed\n      setBaseX((prevBaseX) => prevBaseX - GRAVITY * 8)\n      if (pipe1X > -100) {\n        setPipe1X((prevPipeX) => prevPipeX - GRAVITY * 5.3333)\n      } else {\n        setPipe1X(333)\n        setRandHeight1(Math.floor(Math.random() * 150))\n      }\n\n      // Once the first pipe is past the middle, start moving the 2nd pipe\n      if (pipe1X < 285 || pipe2X < 300) {\n        if (pipe2X > -100) {\n          setPipe2X((prevPipeX) => prevPipeX - GRAVITY * 5.33333)\n        } else {\n          setPipe2X(333)\n          setRandHeight2(Math.floor(Math.random() * 150))\n        }\n      }\n\n\n      // Increment score once bird passes through pipe\n      if (Math.round(pipe1X) === 129 || Math.round(pipe1X) === 130 || Math.round(pipe2X) === 129 || Math.round(pipe2X) === 130) {\n        if (score !== null) {\n          setScore(score + 1)\n        }\n      }\n\n\n      // Game over if birds x and y position cross pipe\n      if (Math.round(pipe1X) < 156 && Math.round(pipe1X) > 71) {\n        if (position > 415 - randHeight1 * 1.5) {\n          handleGameOver()\n        }\n\n        if (position < 295 - randHeight1 * 1.5) {\n          handleGameOver()\n        }\n      }\n\n      // Game over if birds x and y position cross pipe\n      if (Math.round(pipe2X) < 156 && Math.round(pipe2X) > 71) {\n        if (position > 415 - randHeight2 * 1.5) {\n          handleGameOver()\n        }\n\n        if (position < 295 - randHeight2 * 1.5) {\n          handleGameOver()\n        }\n      }\n\n\n    } else {\n      // Clear interval if game over\n      if (intervalId.current) {\n        clearInterval(intervalId.current)\n      }\n      handleGameOver()\n    }\n  }\n\n  const jump = () => {\n    // Set a cap to the height a user can jump\n    if (position > -100) {\n      // Set deltaY to positive number to make velocity positive\n      setDeltaY(GRAVITY * 20)\n      // Add deltaY to the position\n      setPosition((prevPos) => prevPos + deltaY)\n    }\n  }\n\n  const handleEvent = () => {\n    // Start the game on click if first run\n    if (!startGame && !gameOver) {\n      setStartGame(true)\n      setScore(0)\n    }\n\n    jump()\n  }\n\n  const handleGameOver = () => {\n    // Set new best\n    if (score > best) {\n      setBest(score)\n      localStorage.setItem('fb-best', JSON.stringify(score))\n    }\n    setStartGame(false)\n    setGameOver(true)\n    setPipe1X(500)\n    setPipe2X(500)\n  }\n\n  const handleReset = () => {\n      setStartGame(true)\n      setGameOver(false)\n      setScore(0)\n      setPosition(300)\n  }\n\n\n  return (\n    <div onKeyDown={handleEvent} onClick={handleEvent} className='game-wrapper'>\n      <img src={require('./images/background-day.png')} id='bg' width='50' style={{ display: 'none' }} />\n      <img src={require('./images/base.png')} id='base' width='50' style={{ display: 'none' }} />\n      <img src={require('./images/message.png')} id='msg' width='50' style={{ display: 'none' }} />\n      <img src={require('./images/pipe-green.png')} id='pipe' width='50' style={{ display: 'none' }} />\n      <img src={require('./images/yellowbird-upflap.png')} id='bird-uf' width='50' style={{ display: 'none' }} />\n      <img src={require('./images/yellowbird-midflap.png')} id='bird-mf' width='50' style={{ display: 'none' }} />\n      <img src={require('./images/yellowbird-downflap.png')} id='bird-df' width='50' style={{ display: 'none' }} />\n      <canvas ref={canvasRef} width={480} height={640} />\n      {startGame && <div className='score'>{score}</div>}\n      {gameOver &&\n        <div className='end-game-popup'>\n          <div className='game-over-scores'>\n            <div className='text'>SCORE:</div>\n            <div className='text'>{score}</div>\n            <br />\n            <div className='text'>BEST:</div>\n            <div className='text'>{best}</div>\n          </div>\n          <button className='restart' onClick={handleReset}>RESTART</button>\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}